<!-- #ddev-generated -->
<!-- # ddev manages this file and may delete or overwrite it unless the above line is removed.
# This file comes from "ddev get julienloizelet/ddev-crowdsec-php" -->
<p id="intro">This page allows uploading image.</p><form id="imageUploadForm" enctype="multipart/form-data"><label for="image">Select an image to upload:</label><input type="file" id="image" name="file" accept="image/*" required=""><button type="submit">Upload Image</button></form><div id="uploadedImage"></div><script>document.getElementById('imageUploadForm').addEventListener('submit',function(e){e.preventDefault();const formData=new FormData();const fileInput=document.getElementById('image');formData.append('file',fileInput.files[0]);fetch('/wp_appsec_custom_upload.php',{method:'POST',body:formData,}).then(response=>{const contentType=response.headers.get("content-type");if(contentType&&contentType.indexOf("application/json")!==-1){return response.json();}else{return response.status;}}).then(data=>{if(typeof data==='object'&&data.filelink){document.getElementById('uploadedImage').innerHTML=`<img src="${data.filelink}" alt="Uploaded Image">`;}else if(typeof data==='number'){document.getElementById('uploadedImage').innerHTML=data;}else{alert('Failed to upload the image.');}}).catch(error=>{console.error('Error:',error);alert('An error occurred during the upload.');});});</script>
